###########################################
# Flavor Events for Byzantine Missions
#
# Scripted by Henrik Lohmander
###########################################

namespace = flavor_byz
normal_or_historical_nations = yes

#Sack of Venice	#Event no longer in use
country_event = {
	id = flavor_byz.1
	title = flavor_byz.1.t
	desc = flavor_byz.1.d
	picture = WOUNDED_SOLDIERS_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = flavor_byz.1.a
		112 = {
			add_loot_from_rich_province_general_effect = {
				LOOTER = owner #BYZ
			}
			add_province_modifier = {
				name = "chastening_of_venice"
				duration = -1
			}
		}
		capital_scope = {
			add_province_modifier = {
				name = "byzantine_treasures_returned"
				duration = 7300
			}
		}
	}
}

# The Patriarch of Constantinople declares the Great Schism mended
# by Veronica Pazos
#country_event = {
#	id = flavor_byz.2
#	title = flavor_byz.2.t
#	desc = flavor_byz.2.d
#	picture = RELIGION_eventPicture
#	
#	is_triggered_only = yes
#	
#	option = {
#		name = flavor_byz.2.a
#		ai_chance = {
#			factor = 10
#			modifier = {
#				factor = 0
#				ai_attitude = {
#					who = BYZ
#					attitude = attitude_rivalry
#				}
#			}
#			modifier = {
#				factor = 0
#				ai_attitude = {
#					who = BYZ
#					attitude = attitude_hostile
#				}
#			}
#			modifier = {
#				factor = 0
#				ai_attitude = {
#					who = BYZ
#					attitude = attitude_outraged
#				}
#			}
#		}
#		change_religion = orthodox
#		capital_scope = {
#			if = {
#				limit = {
#					NOT = { religion = orthodox }
#				}
#				change_religion = orthodox
#			}
#		}
#		add_stability = -1
#		add_prestige = -30
#	}
#	option = {
#		name = flavor_byz.2.b
#		ai_chance = {
#			factor = 1
#		}
#		add_stability = -3
#	}
#}

country_event = { #restore the name of Alexandria
	id = flavor_byz.22
	title = flavor_byz.22.t
	desc = flavor_byz.22.d
	picture = CITY_DEVELOPMENT_eventPicture
	
	trigger = {
		OR = {
			tag = BYZ
			tag = AGY
			tag = KYR
			AND = {
				tag = ROM
				culture_group = byzantine
			}
		}
		owns = 358
		has_global_flag = foi_egy_alexanderia_renamed
		has_country_flag = foi_byz_alexanderia_captured
	}

	fire_only_once = yes

	mean_time_to_happen = {
		months = 1
	}

	option = {
		name = flavor_byz.22.a
		ai_chance = {
			factor = 100
		}
		358 = {
			change_province_name = "Aleksandreia"
			rename_capital = "Aleksandreia"
		}
		clr_global_flag = foi_egy_alexanderia_renamed
	}
}

country_event = { #return of the Egyptiote or Egyptian Greek community
	id = flavor_byz.3
	title = flavor_byz.3.t
	desc = flavor_byz.3.d
	picture = CITY_DEVELOPMENT_eventPicture
	
	trigger = {
		OR = {
			tag = BYZ
			tag = AGY
			tag = KYR
			AND = {
				tag = ROM
				culture_group = byzantine
			}
		}
		owns = 358
		NOT = { 
			has_global_flag = foi_egy_alexanderia_renamed
			has_global_flag = egy_egyptiote_commununity_flag 
		}
		has_global_flag = egy_egyptiote_deported 
		has_country_flag = foi_byz_alexanderia_captured
	}

	mean_time_to_happen = {
		years = 10
	}

	immediate = {
		clr_country_flag = foi_byz_alexanderia_captured 
	}

	option = {
		name = flavor_byz.3.a
		ai_chance = {
			factor = 100
		}
		358 = {
			add_province_modifier = {
				name = "byz_egyptiote_commununity"
				duration = -1
			}
		}
	}
}

country_event = { #BYZ protect the Egyptiote community
	id = flavor_byz.4
	title = flavor_byz.4.t
	desc = flavor_byz.4.d
	picture = CITY_DEVELOPMENT_eventPicture
	
	trigger = {
		OR = {
			tag = BYZ
			tag = AGY
			tag = KYR
			AND = {
				tag = ROM
				culture_group = byzantine
			}
		}
		owns = 358
		NOT = {
			has_global_flag = foi_egy_alexanderia_renamed
			has_global_flag = egy_egyptiote_deported
		}
		has_country_flag = foi_byz_alexanderia_captured
		#has_global_flag = egy_egyptiote_commununity_flag
	}

	mean_time_to_happen = {
		years = 10
	}

	immediate = {
		clr_country_flag = foi_byz_alexanderia_captured 
	}

	option = {
		name = flavor_byz.4.a
		ai_chance = {
			factor = 100
		}
		358 = {
			add_province_modifier = {
				name = "byz_egyptiote_commununity"
				duration = -1
			}
		}
	}
}

country_event = { #BYZ-Ghassanids mission event
	id = flavor_byz.5
	title = flavor_byz.5.t
	desc = flavor_byz.5.d
	picture = MILITARY_CAMP_eventPicture
	
	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = flavor_byz.5.a
		
		ai_chance = {
			factor = 100
		}
		
		trigger = {
			NOT = {
				exists = GHA
			}
		}
		
		hidden_effect = {
			405 = {
				add_core = GHA
			}
			4270 = {
				add_core = GHA
			}
			4271 = {
				add_core = GHA
			}
			4272 = {
				add_core = GHA
			}
			2327 = {
				add_core = GHA
			}
			2328 = {
				add_core = GHA
			}
			383 = {
				add_core = GHA
			}
			
			set_country_flag = byz_ghassnid_mercs_flag
		}
		
		release = GHA
		create_march = GHA
		
		hidden_effect = {
			if = {
				limit = {
					GHA = { NOT = { religion_group = christian } }
				}
				GHA = {
					change_religion = monophysite
					set_ruler_religion = monophysite
					set_heir_religion = monophysite
				}
			}
			if = {
				limit = {
					2327 = { NOT = { religion_group = christian } }
				}
				2327 = {
					change_religion = GHA
				}
			}
			every_province = {
				limit = {
					AND = {
						owned_by = GHA
						OR = {
							is_core = ROOT
							is_claim = ROOT
						}
					}
				}
				remove_core = ROOT
				remove_claim = ROOT
			}
		}

		custom_tooltip = byz_ghassanid_mercs.tt
		
		add_country_modifier = { 
			name = byz_ghassanid_mercs_modifier
			duration = -1 #end of game
		}
	}
	
	option = {
		name = flavor_byz.5.b
		
		ai_chance = {
			factor = 100
		}
		
		trigger = {
			exists = GHA
		}
		
		hidden_effect = {
			405 = {
				add_core = GHA
			}
			4270 = {
				add_core = GHA
			}
			4271 = {
				add_core = GHA
			}
			4272 = {
				add_core = GHA
			}
			2327 = {
				add_core = GHA
			}
			2328 = {
				add_core = GHA
			}
			383 = {
				add_core = GHA
			}
			
			set_country_flag = byz_ghassanid_mercs_flag
		}		
			
		hidden_effect = {
			if = {
				limit = {
					GHA = { NOT = { religion_group = christian } }
				}
				GHA = {
					change_religion = monophysite
					set_ruler_religion = monophysite
					set_heir_religion = monophysite
				}
			}
			if = {
				limit = {
					2327 = { NOT = { religion_group = christian } }
				}
				2327 = {
					change_religion = GHA
				}
			}
			every_province = {
				limit = {
					AND = {
						owned_by = GHA
						OR = {
							is_core = ROOT
							is_claim = ROOT
						}
					}
				}
				remove_core = ROOT
				remove_claim = ROOT
			}
		}
		
		if = {
			limit = { GHA = { NOT = { is_march = yes } } }
			create_march = GHA
		}
		
		if = {
			limit = {
				any_owned_province = {
					OR = {
						province_id = 405
						province_id = 4270
						province_id = 4271
						province_id = 4272
						province_id = 2327
						province_id = 2328
						province_id = 383
					}
				}
			}
			every_owned_province = {
				limit = {
					OR = {
						province_id = 405
						province_id = 4270
						province_id = 4271
						province_id = 4272
						province_id = 2327
						province_id = 2328
						province_id = 383
					}
				}
				cede_province = GHA
			}
		}
		
		custom_tooltip = byz_ghassanid_mercs.tt
		
		add_country_modifier = { 
			name = byz_ghassanid_mercs_modifier
			duration = -1 #end of game
		}
	}
	
	option = {
		name = flavor_byz.5.c
		
		ai_chance = {
			factor = 0
		}
		
		custom_tooltip = no_byz_ghassanid_mercs.tt
	}
}

country_event = { #Varangian Guard Trigger
	id = flavor_byz.6
	title = none
	desc = none
	picture = none
	hidden = yes
	
	trigger = {
		tag = BYZ
		BYZ = {
			OR = {
				alliance_with = SWE
				alliance_with = NOR
				alliance_with = DAN
				alliance_with = ICE
			}
		}
		NOT = {
			OR = {
				has_country_flag = foi_byz_swe_flag
				has_country_flag = foi_byz_nor_flag
				has_country_flag = foi_byz_dan_flag
				has_country_flag = foi_byz_ice_flag
				has_country_flag = byz_varangian_guard_flag
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		if = {
			limit = { BYZ = { alliance_with = SWE } }
			set_country_flag = foi_byz_swe_flag
		}
		if = {
			limit = { BYZ = { alliance_with = NOR } }
			set_country_flag = foi_byz_nor_flag
		}
		if = {
			limit = { BYZ = { alliance_with = DAN } }
			set_country_flag = foi_byz_dan_flag
		}
		if = {
			limit = { BYZ = { alliance_with = ICE } }
			set_country_flag = foi_byz_ice_flag
		}
	}
	
	option = { }
}

country_event = { #Varangian Guard Trigger Deleter
	id = flavor_byz.61
	title = none
	desc = none
	picture = none
	hidden = yes
	
	trigger = {
		tag = BYZ
		BYZ = {
			NOT = {
				alliance_with = SWE
			}
		}
		has_country_flag = foi_byz_swe_flag
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		clr_country_flag = foi_byz_swe_flag
	}
	
	option = { }
}

country_event = { #Varangian Guard Trigger Deleter
	id = flavor_byz.62
	title = none
	desc = none
	picture = none
	hidden = yes
	
	trigger = {
		tag = BYZ
		BYZ = {
			NOT = {
				alliance_with = NOR
			}
		}
		has_country_flag = foi_byz_nor_flag
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		clr_country_flag = foi_byz_nor_flag
	}
	
	option = { }
}

country_event = { #Varangian Guard Trigger Deleter
	id = flavor_byz.63
	title = none
	desc = none
	picture = none
	hidden = yes
	
	trigger = {
		tag = BYZ
		BYZ = {
			NOT = {
				alliance_with = DAN
			}
		}
		has_country_flag = foi_byz_dan_flag
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		clr_country_flag = foi_byz_dan_flag
	}
	
	option = { }
}

country_event = { #Varangian Guard Trigger Deleter
	id = flavor_byz.64
	title = none
	desc = none
	picture = none
	hidden = yes
	
	trigger = {
		tag = BYZ
		BYZ = {
			NOT = {
				alliance_with = ICE
			}
		}
		has_country_flag = foi_byz_ice_flag
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		clr_country_flag = foi_byz_ice_flag
	}
	
	option = { }
}

country_event = { #Varangian Guard Event
	id = flavor_byz.7
	title = flavor_byz.7.t
	desc = flavor_byz.7.d
	picture = LAND_MILITARY_eventPicture
	
	trigger = {
		tag = BYZ
		OR = {
			had_country_flag = {
				flag = foi_byz_swe_flag
				days = 9125 #25years
			}
			had_country_flag = {
				flag = foi_byz_nor_flag
				days = 9125 #25years
			}
			had_country_flag = {
				flag = foi_byz_dan_flag
				days = 9125 #25years
			}
			had_country_flag = {
				flag = foi_byz_ice_flag
				days = 9125 #25years
			}
		}
	}
	
	major_trigger = {
		OR = {
			AND = {
				tag = SWE
				alliance_with = BYZ
			}
			AND = {
				tag = NOR
				alliance_with = BYZ
			}
			AND = {
				tag = DAN
				alliance_with = BYZ
			}
			AND = {
				tag = ICE
				alliance_with = BYZ
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = flavor_byz.7.a
		
		ai_chance = {
			factor = 100
		}
		
		set_country_flag = byz_varangian_guard_flag
		custom_tooltip = byz_varangian_guard.tt
		
		add_treasury = -500
		
		if = {
			limit = { has_country_flag = foi_byz_swe_flag }
			SWE = { add_treasury = 500 }
			SWE = { add_historical_friend = BYZ }
			add_historical_friend = SWE
			clr_country_flag = foi_byz_swe_flag
		}
		if = {
			limit = { has_country_flag = foi_byz_nor_flag }
			NOR = { add_treasury = 500 }
			NOR = { add_historical_friend = BYZ }
			add_historical_friend = NOR
			clr_country_flag = foi_byz_nor_flag
		}
		if = {
			limit = { has_country_flag = foi_byz_dan_flag }
			DAN = { add_treasury = 500 }
			DAN = { add_historical_friend = BYZ }
			add_historical_friend = DAN
			clr_country_flag = foi_byz_dan_flag
		}
		if = {
			limit = { has_country_flag = foi_byz_ice_flag }
			ICE = { add_treasury = 500 }
			ICE = { add_historical_friend = BYZ }
			add_historical_friend = ICE
			clr_country_flag = foi_byz_ice_flag
		}
	}
	
	option = {
		name = flavor_byz.7.b
		
		ai_chance = {
			factor = 0
		}
		
		set_country_flag = byz_varangian_guard_flag
		custom_tooltip = no_byz_varangian_guard_again.tt
	}
}

#Turkish to cappadocian
province_event = {
	id = "flavor_byz.8"
	title = "flavor_byz.8.t"
	desc = "flavor_byz.8.d"
	picture = RELIGIOUS_CONVERSION_eventPicture

	trigger = {
		culture = turkish
		religion = ROOT
		owner = {
			OR = {
				AND = {
					tag = BYZ
					mission_completed = byz_foi_tame_the_turks
				}
				AND = {
					tag = ROM
					mission_completed = byz_foi_tame_the_turks
				}
				tag = IKO
			}
			OR = {
				religion = orthodox
				religion = chalcedonism
				religion = iconoclast
			}
			NOT = { primary_culture = turkish }
		}
	}

	mean_time_to_happen = {
		years = 40
	}

	option = {
		name = flavor_byz.8.a
		ai_chance = {
			factor = 100
		}
		change_culture = cappadocian
	}
}

#Turks? What Turks?
country_event = {
	id = "flavor_byz.9"
	title = "flavor_byz.9.t"
	desc = "flavor_byz.9.d"
	picture = EUROPEAN_REFUGEES_eventPicture
	
	trigger = {
		OR = {
			AND = {
				tag = BYZ
				NOT = { 
					has_global_flag = byzantine_empire_in_decline_flag 
				}
			}
			AND = {
				tag = ROM
				culture_group = byzantine
			}
		}
		NOT = { exists = ARM }
		NOT = { exists = IKO }
		NOT = { primary_culture = cappadocian }
		owns_core_province = 327
		owns_core_province = 332
		AND = {
			332 = {
				NOT = { 
					culture = western_armenian 
				} 
			}
			327 = { 
				NOT = { 
					culture = western_armenian 
				} 
			}
		}
	}
	
	mean_time_to_happen = {
		months = 120
	}
	
	option = {
		name = flavor_byz.9.a
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				has_country_flag = cuman_macedonian_govenor_flag
			}
			modifier = {
				factor = 4
				has_country_flag = cuman_terterboan_govenor_flag
			}
		}
		add_country_modifier = {
			name = foi_byz_armenian_culture_support
			duration = -1 #end of game
		}
		add_accepted_culture = western_armenian
		327 = { 
			change_culture = western_armenian
			change_religion = coptic
			add_base_tax = 1
			add_base_production = 1
			add_base_manpower = 1
			add_province_modifier = {
				name = "foi_byz_armenian_community"
				duration = 43800			
			}
		}
		332 = { 
			change_culture = western_armenian
			change_religion = coptic
			add_base_tax = 1
			add_base_production = 1
			add_base_manpower = 1
			add_province_modifier = {
				name = "foi_byz_armenian_community"
				duration = 43800			
			}
		}
		if = {
			limit = {
				2303 = {
					owned_by = ROOT
					NOT = { culture = western_armenian }
				}
			}
			2303 = {
				change_culture = western_armenian
				change_religion = coptic
				add_base_tax = 1
				add_province_modifier = {
					name = "foi_byz_armenian_community"
					duration = 43800			
				}
			}
		}
		if = {
			limit = {
				4310 = {
					owned_by = ROOT
					NOT = { culture = western_armenian }
				}
			}
			4310 = {
				change_culture = western_armenian
				change_religion = coptic
				add_base_tax = 1
				add_province_modifier = {
					name = "foi_byz_armenian_community"
					duration = 43800			
				}
			}
		}
		custom_tooltip = byz_cappadocian_unrest.tt
		hidden_effect = {
			every_owned_province = {
				limit = {
					culture = cappadocian
				}
				add_unrest = 10
			}
			random_province = {
				limit = {
					NOT = {
						owned_by = ROOT
					}
					owner = {
						NOT = {
							culture = armenian
							culture = western_armenian
						}
					}
					OR = {
						culture = western_armenian
						culture = armenian
					}
				}
				add_base_tax = -1
				add_base_production = -1
				add_base_manpower = -1
			}
		}
	}

	option = {
		name = flavor_byz.9.b
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0
				has_country_flag = cuman_macedonian_govenor_flag
			}
			modifier = {
				factor = 1.34
				has_country_flag = cuman_terterboan_govenor_flag
			}
		}
		add_stability_or_adm_power = yes
	}
}

# Teabizond
country_event = {
	id = flavor_byz.10
	title = "flavor_byz.10.t"
	desc = "flavor_byz.10.d"
	picture = TRADEGOODS_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		OR = {
			AND = {
				tag = BYZ
				NOT = { 
					has_global_flag = byzantine_empire_in_decline_flag 
				}
			}
			tag = RUM
			AND = {
				tag = ROM
				culture_group = byzantine
			}
		}
		has_any_disaster = no
		owns_core_province = 151
		owns_core_province = 330
		total_development = 400
		treasury = 200
		is_year = 1495
	}
	
	mean_time_to_happen = {
		months = 60	
	}
	
	option = {
		name = "flavor_byz.10.a"
		ai_chance = {
			factor = 100
		}
		add_prestige = 5
		add_treasury = -200
		330 = {
			change_trade_goods = tea
			add_permanent_province_modifier = {
    			name = foi_byz_trapezuntea
    			duration = -1
			}
			add_base_tax = 2
			add_base_production = 3
		}
	}
	option = {
		name = "flavor_byz.10.b"
		ai_chance = {
			factor = 0
		}
		add_prestige = -10
	}
}

#Migration of the Arberians
country_event = {
	id = flavor_byz.11
	title = "flavor_byz.11.t"
	desc = "flavor_byz.11.d"
	picture = STREET_SPEECH_eventPicture
	
	trigger = {
		OR = {
			AND = {
				tag = BYZ
				OR = {
					is_year = 1575
					had_country_flag = { flag = byz_foi_retake_arberia_flag days = 21900 }
				}
			}
			AND = {
				tag = ROM
				OR = {
					is_year = 1550
					had_country_flag = { flag = byz_foi_retake_arberia_flag days = 14600 }
				}
			}
		}
		owns_core_province = 4780
		owns_core_province = 1766
		albania_area = {
			type = all
			owned_by = ROOT
			is_core = ROOT
			culture = albanian
		}
		macedonia_area = {
			type = all
			owned_by = ROOT
			is_core = ROOT
		}
		NOT = { exists = ALB }
		NOT = { exists = SER }
		NOT = { has_global_flag = foi_arberian_migration_flag }
	}
	
	mean_time_to_happen = {
		months = 60
	}

	immediate = {
		clr_country_flag = byz_foi_retake_arberia_flag 
	}

	option = {
		name = "flavor_byz.11.a"
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0
				has_country_flag = cuman_macedonian_govenor_flag
			}
			modifier = {
				factor = 1.1
				has_country_flag = cuman_terterboan_govenor_flag
			}
		}
		set_global_flag = foi_arberian_migration_flag
		add_prestige = -5
		1766 = {
			change_culture = albanian
			add_base_manpower = 1
			add_unrest = 5
		}
		4780 = { 
			change_culture = albanian
			add_base_manpower = 1
			add_unrest = 5
		}
		hidden_effect = {
			every_owned_province = {
				limit = {
					area = albania_area
				}
				change_culture = albanian
			}
		}
		every_owned_province = {
			limit = {
				NOT = { 
					province_id = 1766
				}
				area = macedonia_area
			}
			add_unrest = 10
		}
		add_country_modifier = {
			name = foi_byz_albanian_chieftains
			duration = 3650
		}
	}

	option = {
		name = "flavor_byz.11.b"
		ai_chance = {
			factor = 10
			modifier = {
				factor = 10
				has_country_flag = cuman_macedonian_govenor_flag
			}
			modifier = {
				factor = 0
				has_country_flag = cuman_terterboan_govenor_flag
			}
		}
		set_global_flag = foi_arberian_migration_flag
		add_prestige = 10
		add_manpower = -10
		add_treasury = -100
		1766 = {
			add_base_manpower = -1
		}
		1853 = {
			add_base_manpower = -1
		}
		3001 = {	
			add_base_manpower = -1	
		}
		4780 = {
			add_base_manpower = -1
		}
		random_owned_province = {
			limit = {
				area = albania_area
			}
			add_base_manpower = 1		
		}
		random_owned_province = {
			limit = {
				area = albania_area
			}
			add_base_manpower = 1		
		}
		every_owned_province = {
			limit = {
				area = albania_area
			}
			add_unrest = 10
		}
	}
}

country_event = {
    id = flavor_byz.12
    title = "flavor_byz.12.t"
    desc = "flavor_byz.12.d"
    picture = ECONOMY_eventPicture
    
    fire_only_once = yes
    
    trigger = {
		OR = {
			AND = {
				tag = BYZ
				NOT = { 
					has_global_flag = byzantine_empire_in_decline_flag 
				}
			}
			AND = {
				tag = ROM
				culture_group = byzantine
			}
		}
		has_any_disaster = no
		is_great_power = yes
        owns_core_province = 151
        owns_core_province = 317
        owns_core_province = 146
        owns_core_province = 4701
		treasury = 250
		is_year = 1525
    }

    mean_time_to_happen = {
        months = 60
    }
    
    option = {
        name = "flavor_byz.12.a"
		ai_chance = {
			factor = 100
		}
       	add_treasury = -250
        317 = {
            add_permanent_province_modifier = {
    			name = foi_byzantine_silk
    			duration = -1
			}
        }
        146 = {
            add_permanent_province_modifier = {
    			name = foi_byzantine_silk
    			duration = -1
			}
        }
        4701 = {
            add_permanent_province_modifier = {
    			name = foi_byzantine_silk
    			duration = -1
			}
        }
    }
}

#Administration of Cumania
country_event = {
	id = flavor_byz.13
	title = "flavor_byz.13.t"
	desc = "flavor_byz.13.d"
	picture = FREE_CITY_eventPicture

	is_triggered_only = yes

	option = { #Macedonian Govenor
		name = flavor_byz.13.a
		ai_chance = {
			factor = 70
		}
		add_legitimacy = 5
		add_prestige = 10
		set_country_flag = cuman_macedonian_govenor_flag
		custom_tooltip = byz_flavor_byz.15.a.tt
		hidden_effect = {
			random_list = {
				90 = {
				}
				10 = {
    				country_event = {
        				id = flavor_byz.18
        				days = 360
        				random = 180
					}
				}
			}
		}
	}
	
	option = { #Terterboan Govenor
		name = flavor_byz.13.b
		ai_chance = {
			factor = 30
		}
		add_prestige = -10
		set_country_flag = cuman_terterboan_govenor_flag
		custom_tooltip = byz_flavor_byz.15.b.tt
		custom_tooltip = byz_flavor_byz.13.a.tt
		hidden_effect = {
			every_owned_province = {
				limit = {
					culture = cuman
				}
				add_local_autonomy = 10
			}
		}
	}
}

#Taxation of Moesia
country_event = {
	id = flavor_byz.14
	title = "flavor_byz.14.t"
	desc = "flavor_byz.14.d"
	picture = ECONOMY_eventPicture
	
	trigger = {
		OR = {
			tag = BYZ
			AND = {
				tag = ROM
				culture_group = byzantine
			}
		}
		NOT = { exists = CUM }
		bulgaria_area = {
			type = all
			owned_by = ROOT
			is_core = ROOT
		}
		silistria_area = {
			type = all
			owned_by = ROOT
			is_core = ROOT
		}
		NOT = {
            any_province = {
                culture = cuman
                NOT =  { owned_by = ROOT }
            }
		}
		OR = {
			has_country_flag = cuman_macedonian_govenor_flag
			has_country_flag = cuman_terterboan_govenor_flag
		}
		NOT = { has_country_flag = foi_byz_cuman_romanized_flag }
		NOT = { has_country_flag = tax_moesia_flag }
	}
	
	mean_time_to_happen = {
		months = 240
		modifier = {
			factor = 0.5
			religion = orthodox
			NOT = { has_country_flag = cuman_macedonian_colonization_flag }
		}
		modifier = {
			factor = 0.5
			has_country_flag = foi_byz_cuman_colonization_flag
		}
	}
	
	immediate = {
		hidden_effect = {
			set_country_flag = tax_moesia_flag
		}
	}

	option = { #Taxinize in Gold
		name = flavor_byz.14.a
		ai_chance = {
			factor = 50
		}
		set_country_flag = tax_gold_moesia_flag
		custom_tooltip = byz_flavor_byz.14.a.tt
		custom_tooltip = byz_flavor_byz.15.a.tt
		custom_tooltip = byz_flavor_byz.15.b.tt
		hidden_effect = {
			every_province = {
				limit = {
					OR = {
						area = bulgaria_area
						area = silistria_area
						area = thrace_area
						area = macedonia_area
						culture = cuman
					}
				}
				add_local_autonomy = -10
				add_unrest = 5
			}
		}
		hidden_effect = {		
			random_list = {
				60 = {
				}
				40 = {
    				country_event = {
        				id = flavor_byz.18
        				days = 360
        				random = 180
					}
				}
			}
		}
		add_years_of_income = 0.25
	}
	
	option = { #They have no gold, Taxinize the Cows!
		name = flavor_byz.14.b
		ai_chance = {
			factor = 50
		}
		add_dip_power = -50
		add_years_of_income = 0.125
		2746 = {
			add_province_modifier = {
				name = "foi_byz_cuman_cattle"
				duration = 3650
			}
		}
		2750 = {
			add_province_modifier = {
				name = "foi_byz_cuman_cattle"
				duration = 3650
			}
		}
	}
}

country_event = { #Cuman Migration
	id = flavor_byz.15
	title = "flavor_byz.15.t"
	desc = "flavor_byz.15.d"
	picture = COLONIZATION_eventPicture
	
	trigger = {
		OR = {
			tag = BYZ
			AND = {
				tag = ROM
				culture_group = byzantine
			}
		}
		has_country_flag = tax_moesia_flag
		has_country_flag = cuman_terterboan_govenor_flag
		NOT = { has_country_flag = foi_byz_cuman_romanized_flag }
		NOT = { exists = CUM }
		NOT = {
			any_province = {
	    		culture = cuman
	    		NOT =  { owned_by = ROOT }
			}
		}
		1764 = {
			religion = ROOT
		}
		3001 = {
			religion = ROOT
		}
		owns_core_province = 1764
		owns_core_province = 3001
	}
	
	fire_only_once = yes

	mean_time_to_happen = {
		months = 480
		modifier = {
			factor = 0.75
			NOT = { has_country_flag = tax_gold_moesia_flag }
			religion = orthodox
		}
		modifier = {
			factor = 0.5
			has_country_flag = tax_gold_moesia_flag
			NOT = { religion = orthodox }
		}
		modifier = {
			factor = 0.25
			has_country_flag = tax_gold_moesia_flag
			religion = orthodox
		}
	}
	
	immediate = {
		hidden_effect = {
			clr_country_flag = tax_moesia_flag
		}
	}

	option = { #Coomerization!
		name = flavor_byz.15.a
		ai_chance = {
			factor = 90
		}
		add_prestige = -10
		add_legitimacy = -5
		1764 = {
			change_culture = cuman
			add_core = CUM
		}
		if = {
			limit = {
				NOT = {
					has_global_flag = foi_cum_confederation_ravaged_flag
				}
			}
			3001 = {
				change_culture = cuman
				add_core = CUM
				remove_core = MAC
			}
		}
		custom_tooltip = byz_flavor_byz.15.b.tt
		set_country_flag = foi_byz_cuman_colonization_flag
	}
	
	option = { #No Cumans
		name = flavor_byz.15.b
		ai_chance = {
			factor = 10
		}
		add_prestige = 10
		add_legitimacy = 5
		set_country_flag = foi_byz_cuman_colonization_blocked_flag
		custom_tooltip = byz_flavor_byz.15.a.tt
		hidden_effect = {
			random_list = {
				80 = {
				}
				20 = {
    				country_event = {
        				id = flavor_byz.18
        				days = 360
        				random = 180
					}
				}
			}
		}
	}
}

#Romanization of the Cuman nation
country_event = {
	id = flavor_byz.16
	title = flavor_byz.16.t
	desc = flavor_byz.16.d
	picture = RELIGIOUS_CONVERSION_eventPicture
	
	trigger = {
		OR = {
			tag = BYZ
			AND = {
				tag = ROM
				culture_group = byzantine
			}
		}
		NOT = {
			any_province = {
	    		culture = cuman
	    		NOT =  { owned_by = ROOT }
			}
		}
		OR = {
			has_country_flag = foi_byz_cuman_colonization_flag 
			has_country_flag = foi_byz_cuman_colonization_blocked_flag
		}
		has_country_flag = tax_moesia_flag
	}
	
	mean_time_to_happen = {
		months = 480
		modifier = {
			factor = 1.5
			has_country_flag = cuman_macedonian_colonization_flag
		}
		modifier = {
			factor = 0.75
			has_country_flag = tax_moesia_flag 
			NOT = { has_country_flag = foi_byz_cuman_colonization_flag }
			NOT = { has_country_flag = cuman_macedonian_colonization_flag }
			religion = orthodox
		}
		modifier = {
			factor = 0.5
			has_country_flag = foi_byz_cuman_colonization_flag
			NOT = { has_country_flag = cuman_macedonian_colonization_flag }
			NOT = { religion = orthodox }
		}
		modifier = {
			factor = 0.25
			has_country_flag = foi_byz_cuman_colonization_flag 
			NOT = { has_country_flag = cuman_macedonian_colonization_flag }
			religion = orthodox
		}
	}
	
	option = {
		name = flavor_byz.16.a
		ai_chance = {
			factor = 100
		}
		clr_country_flag = tax_moesia_flag
		clr_country_flag = foi_byz_cuman_colonization_flag 
		clr_country_flag = foi_byz_cuman_colonization_blocked_flag
		clr_country_flag = cuman_macedonian_colonization_flag
		set_country_flag = foi_byz_cuman_romanized_flag
		every_province = {
			limit = { culture = cuman }
			change_culture = cuman_greek
		}
	}
}

country_event = { ###Macedonian Colonization###
	id = flavor_byz.17
	title = "flavor_byz.17.t"
	desc = "flavor_byz.17.d"
	picture = COLONIZATION_eventPicture
	
	trigger = {
		OR = {
			tag = BYZ
			AND = {
				tag = ROM
				culture_group = byzantine
			}
		}
		has_country_flag = tax_moesia_flag
		has_country_flag = cuman_macedonian_govenor_flag
		NOT = { has_country_flag = foi_byz_cuman_romanized_flag }
		NOT = { exists = CUM }
		NOT = {
			any_province = {
	    		culture = cuman
	    		NOT =  { owned_by = ROOT }
			}
		}
		owns_core_province = 2750
		owns_core_province = 4703
	}
	
	fire_only_once = yes

	mean_time_to_happen = {
		months = 720
		modifier = {
			factor = 0.9
			has_country_flag = tax_gold_moesia_flag
			NOT = { religion = orthodox }
		}
		modifier = {
			factor = 0.7
			has_country_flag = tax_gold_moesia_flag
			religion = orthodox
		}
	}
	
	immediate = {
		hidden_effect = {
			clr_country_flag = tax_moesia_flag
		}
	}

	option = { #Support Colonization
		name = flavor_byz.17.a
		ai_chance = {
			factor = 75
			modifier = {
				factor = 1.34
				treasury = 400
			}
			modifier = {
				factor = 0
				NOT = { treasury = 400 }
			}
		}
		add_prestige = 15
		add_legitimacy = 5
		add_treasury = -400
		2750 = {
			change_culture = macedonian
			add_core = MAC
			remove_core = CUM
			change_trade_goods = grain
			add_base_production = 2
			add_base_manpower = 1
		}
		if = {
			limit = {
				NOT = {
					has_global_flag = foi_cum_confederation_ravaged_flag
				}
			}
			4703 = {
				change_culture = macedonian
				add_core = BYZ
				remove_core = CUM
				add_base_production = 2
				add_base_manpower = 1
			}
		}
		if = {
			limit = {
				has_global_flag = foi_cum_confederation_ravaged_flag
			}
			4703 = {
				change_culture = macedonian
				add_base_production = 2
				add_base_manpower = 2
			}
		}
		custom_tooltip = byz_flavor_byz.15.a.tt
		set_country_flag = cuman_macedonian_colonization_flag
		hidden_effect = {
			random_list = {
				40 = {
				}
				60 = {
    				country_event = {
        				id = flavor_byz.18
        				days = 360
        				random = 180
					}
				}
			}
		}
	}
	
	option = { #Allow
		name = flavor_byz.17.b
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				treasury = 400
			}
			modifier = {
				factor = 4
				NOT = { treasury = 400 }
			}
		}
		add_prestige = 10
		2750 = {
			change_culture = macedonian
			add_core = MAC
			remove_core = CUM
		}
		4703 = {
			change_culture = macedonian
			add_core = BYZ
			remove_core = CUM
		}
		custom_tooltip = byz_flavor_byz.15.a.tt
		set_country_flag = cuman_macedonian_colonization_flag
		hidden_effect = {
			random_list = {
				60 = {
				}
				40 = {
    				country_event = {
        				id = flavor_byz.18
        				days = 360
        				random = 180
					}
				}
			}
		}
	}

	option = { #No Colonists
		name = flavor_byz.17.c
		ai_chance = {
			factor = 0
		}
		add_prestige = -10
		add_legitimacy = -5
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -10
		}
		custom_tooltip = byz_flavor_byz.15.b.tt
	}
}

country_event = { ###Cuman revolts###
	id = flavor_byz.18
	title = flavor_byz.18.t
	desc = flavor_byz.18.d
	picture = BATTLE_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					culture = cuman
				}
				spawn_rebels = {
					type = nationalist_rebels
					size = 2
					culture = cuman
				}
			}
			random_owned_province = {
				limit = {
					culture = cuman
				}
				spawn_rebels = {
					type = nationalist_rebels
					size = 1
					culture = cuman
				}
			}
		}
	}

	option = {
		name = flavor_byz.18.a
		ai_chance = { factor = 100 }
	}
}

#Hellenization of Magna Grecia
province_event = {
	id = flavor_byz.19
	title = "flavor_byz.19.t"
	desc = "flavor_byz.19.d"
	picture = CITY_DEVELOPMENT_eventPicture
	
	trigger = {
		owner = {
			culture_group = byzantine
			religion_group = christian
			OR = {
				tag = BYZ
				tag = ROM
			}
		}
		has_owner_religion = yes
		NOT = { culture = griko }
		NOT = { province_id = 118 }
		OR = {
			culture = neapolitan
			culture = campanian
			culture = sicilian
			AND = {
				culture_group = latin
				OR = {
					area = western_sicily_area
					area = calabria_area
					area = apulia_area
					area = sicily_area
					area = naples_area
				}
			}
		}
	}
	
	mean_time_to_happen = {
		years = 40
	}
	
	option = {
		name = flavor_byz.19.a
		ai_chance = {
			factor = 100
		}
		change_culture = griko
	}
}

#Italiotinization of the Italians
province_event = {
	id = flavor_byz.20
	title = "flavor_byz.20.t"
	desc = "flavor_byz.20.d"
	picture = CITY_DEVELOPMENT_eventPicture
	
	trigger = {
		NOT = { culture = italian_greek }
		NOT = { culture = griko }
		118 = { culture = italian_greek }
		culture_group = latin
		has_owner_religion = yes
		NOT = {
			OR = {
				province_id = 114
				province_id = 118
				area = calabria_area
				area = apulia_area
				area = sicily_area
				area = naples_area
			}
		}
		owner = {
			OR = {
				tag = BYZ
				tag = ROM
			}
			is_core = ROOT
			owns_core_province = 118
		}
	}
	
	mean_time_to_happen = {
		years = 320
		modifier = {
			factor = 0.15
			culture = dalmatian
			NOT = { religion = chalcedonism }
		}
		modifier = {
			factor = 0.2
			culture = sardinian
			NOT = { religion = chalcedonism }
		}
		modifier = {
			factor = 0.25
			culture = umbrian
			NOT = { religion = chalcedonism }
		}
		modifier = {
			factor = 0.25
			culture = romagnan
			NOT = { religion = chalcedonism }
		}
		modifier = {
			factor = 0.5
			culture = venetian 
			NOT = { religion = chalcedonism }
		}
		modifier = {
			factor = 0.5
			culture = ligurian
			NOT = { religion = chalcedonism }
		}
		modifier = {
			factor = 0.1
			culture = dalmatian
			religion = chalcedonism
		}
		modifier = {
			factor = 0.15
			culture = sardinian
			religion = chalcedonism
		}
		modifier = {
			factor = 0.2
			culture = umbrian
			religion = chalcedonism
		}
		modifier = {
			factor = 0.2
			culture = romagnan
			religion = chalcedonism
		}
		modifier = {
			factor = 0.3
			culture = venetian
			religion = chalcedonism
		}
		modifier = {
			factor = 0.3
			culture = ligurian
			religion = chalcedonism
		}
		modifier = {
			factor = 0.5
			NOT = {
				OR = {
					culture = dalmatian
					culture = sardinian
					culture = umbrian
					culture = romagnan
					culture = venetian
					culture = ligurian
				}
			}
			religion = chalcedonism
		}
	}
	
	option = {
		name = flavor_byz.20.a
		ai_chance = {
			factor = 100
		}
		change_culture = italian_greek
	}
}

#When in Rome, do as the Italiots do
province_event = {
	id = flavor_byz.21
	title = "flavor_byz.21.t"
	desc = "flavor_byz.21.d"
	picture = ST_PETERS_CHURCH_eventPicture
	
	trigger = {
		province_id = 118
		NOT = { culture = italian_greek }
		has_owner_religion = yes
		owner = {
			culture_group = byzantine
			OR = {
				tag = BYZ
				tag = ROM
			}
			is_core = 118
		}
	}
	
	mean_time_to_happen = {
		years = 50
		modifier = {
			factor = 0.8
			religion = chalcedonism
		}
	}
	
	option = {
		name = flavor_byz.21.a
		ai_chance = {
			factor = 100
		}
		change_culture = italian_greek
	}
}

#Ravenna Ã© Nosse #nossa*. Nice try, Thrawn
province_event = {
	id = flavor_byz.23
	title = "flavor_byz.23.t"
	desc = "flavor_byz.23.d"
	picture = ARTWORK_eventPicture

	mean_time_to_happen = {
		years = 50
		modifier = {
			factor = 0.8
			religion = chalcedonism
		}
	}

	trigger = {
		province_id = 114
		NOT = { culture = italian_greek }
		has_owner_religion = yes
		owner = {
			culture_group = byzantine
			OR = {
				tag = BYZ
				tag = ROM
			}
			is_core = 114
		}
	}
	
	option = {
		name = flavor_byz.23.a
		ai_chance = {
			factor = 100
		}
		add_base_tax = 3
		add_base_production = 3
		add_base_manpower = 1
		center_of_trade = 1
		change_culture = italian_greek
	}
}

#Baltimore
country_event = {
    id = flavor_byz.24
    title = "flavor_byz.24.t"
    desc = "flavor_byz.24.d"
    picture = CITY_VIEW_eventPicture
    
    fire_only_once = yes
    
    trigger = {
		OR = {
			tag = BYZ
			AND = {
				tag = ROM
				culture_group = byzantine
			}
		}
		953 = {
			country_or_non_sovereign_subject_holds = ROOT
		}
    }
    
    mean_time_to_happen = {
        days = 7
    }
    
    option = {
        name = "flavor_byz.24.a"
		ai_chance = {
			factor = 100
		}
		953 = {
			add_base_tax = 2
			add_base_production = 2
			add_base_manpower = 1
			change_culture = greek_america
			change_religion = ROOT
		}
    }
}

country_event = { #BYZ-Bulgar mission event
	id = flavor_byz.25
	title = flavor_byz.25.t
	desc = flavor_byz.25.d
	picture = CONQUEST_eventPicture
	
	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = flavor_byz.25.a
		ai_chance = { factor = 100 }
		trigger = {
			NOT = {
				exists = BUL
			}
		}	
		hidden_effect = {
			every_province = {
				limit = {
					is_core = BUL
				}
				remove_core = BUL
			}
			every_province = {
				limit = {
					OR = {
						culture = bulgarian
						culture = slovak
						area = transdanubia_area
						area = alfold_area
						area = slovakia_area
					}
				}
				add_core = BUL
			}
			set_country_flag = byz_bulgarian_mercs_flag
		}
		release = BUL
		create_march = BUL
		hidden_effect = {
			if = {
				limit = {
					BUL = { NOT = { religion = orthodox } }
					BYZ = { religion = orthodox }
				}
				BUL = {
					change_religion = orthodox
					set_ruler_religion = orthodox
					set_heir_religion = orthodox
				}
			}
			if = {
				limit = {
					BUL = { NOT = { religion = orthodox } }
					OR = {
						BYZ = { religion = orthodox }
						AND = {
							ROM = {
								culture_group = byzantine
								religion = orthodox
							}
						}
					}
				}
				BUL = {
					change_religion = orthodox
					set_ruler_religion = orthodox
					set_heir_religion = orthodox
				}
			}
			if = {
				limit = {
					BUL = { NOT = { religion = chalcedonism } }
					OR = {
						BYZ = { religion = chalcedonism }
						AND = {
							ROM = {
								culture_group = byzantine
								religion = chalcedonism
							}
						}
					}
				}
				BUL = {
					change_religion = chalcedonism
					set_ruler_religion = chalcedonism
					set_heir_religion = chalcedonism
				}
			}
			every_province = {
				limit = {
					AND = {
						owned_by = BUL
						OR = {
							is_core = ROOT
							is_claim = ROOT
						}
					}
				}
				remove_core = ROOT
				remove_claim = ROOT
			}
			every_province = {
				limit = {
					OR = {
						area = bohemia_area
						area = erzgebirge_area
						area = austria_proper_area
						area = inner_austria_area
						area = moravia_area
						area = lusatia_area
						area = silesia_area
					}
				}
				add_permanent_claim = BUL
			}
		}
		custom_tooltip = byz_bulgarian_mercs.tt
		
		add_country_modifier = { 
			name = byz_bulgarian_mercs_modifier
			duration = -1 #end of game
		}
	}
	
	option = {
		name = flavor_byz.25.b
		
		ai_chance = {
			factor = 100
		}
		
		trigger = {
			exists = BUL
		}
		
		hidden_effect = {
			every_province = {
				limit = {
					is_core = BUL
					NOT = { owned_by = BUL }
				}
				remove_core = BUL
			}
			every_province = {
				limit = {
					OR = {
						culture = bulgarian
						culture = slovak
						area = transdanubia_area
						area = alfold_area
						area = slovakia_area
					}						
					NOT = { owned_by = BUL }
				}
				add_core = BUL
			}
			set_country_flag = byz_bulgarian_mercs_flag
		}		
			
		hidden_effect = {
			if = {
				limit = {
					BUL = { NOT = { religion = orthodox } }
					BYZ = { religion = orthodox }
				}
				BUL = {
					change_religion = orthodox
					set_ruler_religion = orthodox
					set_heir_religion = orthodox
				}
			}
			if = {
				limit = {
					BUL = { NOT = { religion = orthodox } }
					OR = {
						BYZ = { religion = orthodox }
						AND = {
							ROM = {
								culture_group = byzantine
								religion = orthodox
							}
						}
					}
				}
				BUL = {
					change_religion = orthodox
					set_ruler_religion = orthodox
					set_heir_religion = orthodox
				}
			}
			if = {
				limit = {
					BUL = { NOT = { religion = chalcedonism } }
					OR = {
						BYZ = { religion = chalcedonism }
						AND = {
							ROM = {
								culture_group = byzantine
								religion = chalcedonism
							}
						}
					}
				}
				BUL = {
					change_religion = chalcedonism
					set_ruler_religion = chalcedonism
					set_heir_religion = chalcedonism
				}
			}
			every_province = {
				limit = {
					AND = {
						owned_by = BUL
						OR = {
							is_core = ROOT
							is_claim = ROOT
						}
					}
				}
				remove_core = ROOT
				remove_claim = ROOT
			}
		}
		if = {
			limit = { BUL = { NOT = { is_march = yes } } }
			create_march = BUL
		}
		hidden_effect = {
			if = {
				every_owned_province = {
					limit = {
						is_core = BUL
					}
					cede_province = BUL
				}
			}
			every_province = {
				limit = {
					OR = {
						area = bohemia_area
						area = erzgebirge_area
						area = austria_proper_area
						area = inner_austria_area
						area = moravia_area
						area = lusatia_area
						area = silesia_area
					}
				}
				add_permanent_claim = BUL
			}
		}
		custom_tooltip = byz_bulgarian_mercs.tt
		add_country_modifier = { 
			name = byz_bulgarian_mercs_modifier
			duration = -1 #end of game
		}
	}
	
	option = {
		name = flavor_byz.25.c
		
		ai_chance = {
			factor = 0
		}
		
		custom_tooltip = no_byz_bulgarian_mercs.tt
	}
}