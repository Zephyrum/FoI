###########################################
# Flavor Events for Egypt
#
# Made by neothiamin and telebbread
#
#flags used:
# foi_egy_alexandria_egyptiote
# foi_egy_alexanderia_renamed
# egy_egyptiote_deported
# egy_egyptiote_commununity_flag
# egy_deport_egyptiote_commununity_flag
# foi_egy_jordan_kingdom
# egy_kyrenaikian_deported_flag
# foi_egy_kyrenaikian_conquest
# foi_egy_kyrenaikian_greek_rebellion
# foi_egy_kyrenaikian_community_flag
# foi_egy_cyprus_conquest
# foi_egy_cyprus_greek_rebellion
# received_kyrenaikian_commununity_flag
# foi_egy_byzantine_scholars_flag
# egy_nile_delta_construction_wait_flag
# foi_egy_scholars_stop_flag
# foi_great_memphis_academy_wait
# foi_great_memphis_academy_stop
# foi_library_alexandria_wait_flag
# foi_egy_alexandria_scholars_fund_flag
# egy_nile_delta_restored_flag
###########################################

namespace = foi_flavor_egy

country_event = {
	id = foi_flavor_egy.1
	title = foi_flavor_egy.1.t
	desc = foi_flavor_egy.1.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = foi_flavor_egy.1.a
		ai_chance = { factor = 50 } 
		add_prestige = 20
		361 = {
			add_base_tax = 1
			add_base_production = 1
			add_base_manpower = 1
		}
		1227 = {
			add_base_tax = -1
			add_base_production = -1
			add_base_manpower = -1
			add_local_autonomy = 50
		}
	}
	option = {
		name = foi_flavor_egy.1.b
		ai_chance = { factor = 50 } 
		add_prestige = 20
		1227 = {
			add_unrest = -7.5
			add_province_modifier = {
				name = "egy_ark_of_the_covenant"
				duration = 18250
			}
			add_latest_tax_building = yes
		}
	} 
}
country_event = {
	id = foi_flavor_egy.2
	title = foi_flavor_egy.2.t
	desc = foi_flavor_egy.2.d
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = foi_flavor_egy.2.a
		ai_chance = { factor = 100 } 
		add_prestige = 25
		add_country_modifier = {
			name = "egy_holy_cities_conquered"
			duration = 9125
		}
	}
}

country_event = { ###fate of the Egyptiote community###
	id = foi_flavor_egy.3
	title = foi_flavor_egy.3.t
	desc = foi_flavor_egy.3.d
	picture = MERCHANTS_TALKING_eventPicture

	trigger = {
		tag = EGY
		owns = 358
		owns = 361
		has_country_flag = foi_egy_alexandria_egyptiote
	}

	fire_only_once = yes

	mean_time_to_happen = {
		months = 60
	}

	option = { #deport the Egyptiote community
		name = foi_flavor_egy.3.a
		ai_chance = { 
			factor = 50 
			modifier = {
				factor = 1.6
				is_rival = BYZ
			}
			modifier = {
				factor = 0.4
				alliance_with = BYZ
			}
		}
		custom_tooltip = foi_flavor_egy.3.a.tt
		set_global_flag = egy_egyptiote_deported
		every_country = {
			limit = {
				OR = {
					primary_culture = macedonian
					primary_culture = morean
					primary_culture = aegean
					primary_culture = micrasiate
					primary_culture = pontic_greek
					primary_culture = cappadocian
					primary_culture = griko
				}
				religion = orthodox
			}
			set_global_flag = egy_deport_egyptiote_commununity_flag 
			add_opinion = { 
				who = ROOT 
				modifier = foi_egy_egyptiote_deported
			}
		}
	}

	option = { #support the Egyptiote community
		name = foi_flavor_egy.3.b
		ai_chance = { 
			factor = 50 
			modifier = {
				factor = 0.4
				is_rival = BYZ
			}
			modifier = {
				factor = 1.6
				alliance_with = BYZ
			}
		}
		custom_tooltip = foi_flavor_egy.3.b.tt
		set_global_flag = egy_egyptiote_commununity_flag
		set_country_flag = restore_EGY_L_HEL_ALX
		358 = {
			add_province_modifier = {
				name = "egy_egyptiote_commununity"
				duration = -1
			}
		}
	}
}

country_event = { ###Name of Alexandria###
	id = foi_flavor_egy.4
	title = foi_flavor_egy.4.t
	desc = foi_flavor_egy.4.d
	picture = COPTIC_CITY_eventPicture

	trigger = {
		tag = EGY
		owns = 358
		owns_core_province = 361
		has_global_flag = egy_egyptiote_deported 
	}

	fire_only_once = yes

	mean_time_to_happen = {
		months = 120
	}

	option = { #Rename Alexandria to Rakoti
		name = foi_flavor_egy.4.a
		ai_chance = { factor = 100 }
		custom_tooltip = foi_flavor_egy.3.a.tt 
		set_country_flag = restore_EGY_ALX_rakoti
		set_global_flag = foi_egy_alexanderia_renamed
		358 = {
			change_province_name = "Rakoti"
			rename_capital = "Rakoti"
		}
	}
	option = { #The name of Alexandria has stay
		name = foi_flavor_egy.4.b
		ai_chance = { factor = 0 } 
		custom_tooltip = foi_flavor_egy.3.b.tt 
		set_country_flag = restore_EGY_S_HEL_ALX
	}
}

#Jordan March
country_event = {
	id = foi_flavor_egy.5
	title = foi_flavor_egy.5.t
	desc = foi_flavor_egy.5.d
	picture = RELIGIOUS_CONVERSION_eventPicture

	trigger = {
		tag = EGY
		owns = 380
		owns = 381
		is_at_War = no
		has_country_flag = foi_egy_jordan_kingdom
	}

	immediate = {
		hidden_effect = {
			380 = {
				add_core = JOR
			}
			381 = {
				add_core = JOR
			}
			383 = {
				add_core = JOR
			}
			2327 = {
				add_core = JOR
			}
			4270 = {
				add_core = JOR
			}
			4272 = {
				add_core = JOR
			}
		}
	}

	fire_only_once = yes

	mean_time_to_happen = {
		months = 3
	}

	option = { #we dont need a jordanian march
		name = foi_flavor_egy.5.a
		ai_chance = { factor = 40 } 
		every_owned_province = {
			limit = { 
				is_core = JOR
			}
			add_unrest = 10
		}
	}
	option = { #restablish the jordanian march
		name = foi_flavor_egy.5.b
		ai_chance = { factor = 60 } 
		every_owned_province = {
			limit = { 
				is_core = JOR
			}
			cede_province = JOR
			remove_core = EGY
		}
		create_march = JOR
		JOR = {
			define_ruler = {
				name = "Isaac III"
				dynasty = "Kohen"
				claim = 100
				male = yes
				culture = hebrew
				religion = coptic
			}
		}
		every_owned_province = {
			limit = { 
				culture = hebrew 
			}
			add_unrest = -10
		}
	}
}

country_event = { ###Restore the city of Waset or Thebes in Egypt###
	id = foi_flavor_egy.6
	title = foi_flavor_egy.6.t
	desc = foi_flavor_egy.6.d
	picture = CITY_DEVELOPMENT_eventPicture
	
	trigger = {
		tag = EGY
		is_year = 1515
		owns_core_province = 360
		has_global_flag = foi_egy_alexanderia_renamed
		NOT = {
			has_country_flag = egy_nile_delta_restored_flag 
			has_country_flag = egy_nile_delta_construction_flag
			has_country_flag = egy_nile_delta_construction_wait_flag
			has_country_flag = egy_waset_construction_flag
			has_country_flag = egy_waset_restored_flag 
			has_country_flag = egy_waset_construction_wait_flag
		}	
	}

	mean_time_to_happen = {
		months = 240
	}

	option = { #Let us restore the city of Waset
		name = foi_flavor_egy.6.a
		custom_tooltip = foi_flavor_egy.3.a.tt 
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				NOT = { years_of_income = 0.3 }
			}
		}
		add_years_of_income = -0.3
		set_country_flag = egy_waset_construction_flag
		360 = {
			change_province_name = "Wasia"
			rename_capital = "Wasia"
			add_province_modifier = {
				name = "egy_waset_construction"
				duration = -1
			}
		}
	}
	
	option = { #Upper Egypt will still be managed by Memphis
		name = foi_flavor_egy.6.b
		custom_tooltip = foi_flavor_egy.3.b.tt 
		ai_chance = {
			factor = 0
		}
		add_stability_or_adm_power = yes
	}

	option = { #Another Time
		name = foi_flavor_egy.6.c
		ai_chance = {
			factor = 0
			modifier = {
				factor = 100
				NOT = { years_of_income = 0.3 }
			}
		}
		add_prestige = -20
		set_country_flag = egy_waset_construction_wait_flag
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -10
		}
	}	
}

country_event = { ###Waset restored###
	id = foi_flavor_egy.7
	title = foi_flavor_egy.7.t
	desc = foi_flavor_egy.7.d
	picture = CITY_VIEW_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		tag = EGY
		owns_core_province = 360
		360 = {
			has_province_modifier = egy_waset_construction
		}
		had_country_flag = { flag = egy_waset_construction_flag days = 7300 }
	}

	mean_time_to_happen = {
		months = 300
	}
	
	option = { #Feels good man
		ai_chance = { factor = 100 }
		name = foi_flavor_egy.7.a
		add_prestige = 20
		360 = {
			remove_province_modifier = egy_waset_construction
		}
		said_area = {
			limit = { owned_by = root }
			add_province_modifier = {
				name = "egy_waset_restored"
				duration = -1
			}
		}
		set_country_flag = egy_waset_restored_flag 
	}	
}

#################################
###Cyrenaica rebel event chain###
#################################

country_event = { ###Administration of Cyrenaica
	id = foi_flavor_egy.8
	title = foi_flavor_egy.8.t
	desc = foi_flavor_egy.8.d
	picture = CONQUEST_eventPicture
	
	trigger = {
		tag = EGY
		cyrenaica_area = {
			type = all
			owned_by = ROOT
		}
		has_country_flag = foi_egy_kyrenaikian_conquest
	}

	mean_time_to_happen = {
		months = 120
	}

	immediate = {
		clr_country_flag = foi_egy_kyrenaikian_conquest
	}

	option = { #maintain coptic administration over cyrenaica
		name = foi_flavor_egy.8.a
		custom_tooltip = foi_flavor_egy.3.a.tt 
		ai_chance = { 
			factor = 50 
			modifier = {
				factor = 2
				has_global_flag = egy_deport_egyptiote_commununity_flag
			}
			modifier = {
				factor = 0
				has_global_flag = egy_egyptiote_commununity_flag
			}
		}
		hidden_effect = {
    		country_event = {
        		id = foi_flavor_egy.9
        		days = 3650
        		random = 365
			}
		}
	}	

	option = { #allow kyrenaikian rule over cyrenaica
		name = foi_flavor_egy.8.b 
		custom_tooltip = foi_flavor_egy.3.b.tt 
		ai_chance = { 
			factor = 50
			modifier = {
				factor = 0
				has_global_flag = egy_deport_egyptiote_commununity_flag
			}
			modifier = {
				factor = 2
				has_global_flag = egy_egyptiote_commununity_flag
			}
		}
		set_global_flag = foi_egy_kyrenaikian_community_flag
		cyrenaica_area = {
			limit = { owned_by = root }
			add_province_modifier = {
				name = "egy_kyrenaikian_administration"
				duration = -1
			}
		}
	}	
}


country_event = { ###Unrest in cyrenaica###
	id = foi_flavor_egy.9
	title = foi_flavor_egy.9.t
	desc = foi_flavor_egy.9.d
	picture = DIPLOMACY_eventPicture
	
	is_triggered_only = yes


	option = { #military intervention
		name = foi_flavor_egy.9.a
		ai_chance = { 
			factor = 20
			modifier = {
				factor = 0
				NOT = { manpower = 10 }
			}
			modifier = {
				factor = 3
				manpower = 20
			}
		}
		add_manpower = -6
		hidden_effect = {
			random_list = {
				80 = {
    				country_event = {
        				id = foi_flavor_egy.10
        				days = 3650
        				random = 730
					}
				}
				20 = {
    				country_event = {
        				id = foi_flavor_egy.11
        				days = 1825
        				random = 365
					}
				}
			}
		}
	}	

	option = { #let the local coptic administration handle it
		name = foi_flavor_egy.9.b
		ai_chance = { 
			factor = 80
			modifier = {
				factor = 1.25
				NOT = { manpower = 10 }
			}
			modifier = {
				factor = 0.5
				manpower = 20
			}
		}
		hidden_effect = {
			random_list = {
				90 = {
    				country_event = {
        				id = foi_flavor_egy.13
        				days = 7300
        				random = 365
					}
				}
				10 = {
    				country_event = {
        				id = foi_flavor_egy.11
        				days = 1825
        				random = 365
					}
				}
			}
		}
	}	
}

country_event = { ###Kyrenaikian revolt small###
	id = foi_flavor_egy.10
	title = foi_flavor_egy.10.t
	desc = foi_flavor_egy.10.d
	picture = CITY_DEVELOPMENT_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			356 = {
				spawn_rebels = {
					type = nationalist_rebels
					size = 2
					leader = "Alexander"
					leader_dynasty = "Drakontopoulos"
					culture = kyrenaikian_greek
				}					
			}
		}
	}

	option = {
		name = foi_flavor_egy.10.a
		ai_chance = { factor = 100 }
		set_country_flag = foi_egy_kyrenaikian_greek_rebellion
	}
}

country_event = { ###Peace for now? if nothing happens###
	id = foi_flavor_egy.11
	title = foi_flavor_egy.11.t
	desc = foi_flavor_egy.11.d
	picture = DEBATE_REPUBLICAN_eventPicture

	is_triggered_only = yes

	option = { #expell the kyrenaikians
		name = foi_flavor_egy.11.a
		custom_tooltip = foi_flavor_egy.3.a.tt  
		ai_chance = { 
			factor = 5
			modifier = {
				factor = 8
				has_global_flag = egy_deport_egyptiote_commununity_flag
			}
			modifier = {
				factor = 0
				has_global_flag = egy_egyptiote_commununity_flag
			}
		}
		cyrenaica_area = {
			limit = { 
				owned_by = root
				culture = kyrenaikian_greek
			}
			change_culture = kyrenaikian_coptic
			change_religion = coptic
			add_devastation = 40
			remove_core = KYR
			add_base_tax = -1
			add_base_production = -1
			add_base_manpower = -1	
		}
		356 = {
			add_loot_from_rich_province_general_effect = {
				LOOTER = owner #EGY
			}
		}
		set_global_flag = egy_kyrenaikian_deported_flag
		every_country = {
			limit = {
				OR = {
					primary_culture = macedonian
					primary_culture = morean
					primary_culture = aegean
					primary_culture = micrasiate
					primary_culture = pontic_greek
					primary_culture = cappadocian
					primary_culture = griko
				}
				religion = orthodox
			}
			add_opinion = { 
				who = ROOT 
				modifier = foi_egy_kyrenaikian_deported
			}
		}
	}	

	option = { #we shall take their word
		name = foi_flavor_egy.11.b
		custom_tooltip = foi_flavor_egy.3.b.tt 
		ai_chance = { 
			factor = 90
			modifier = {
				factor = 0.72
				has_global_flag = egy_deport_egyptiote_commununity_flag
			}
			modifier = {
				factor = 1.12
				has_global_flag = egy_egyptiote_commununity_flag
			}
		}
		set_global_flag = foi_egy_kyrenaikian_community_flag
		cyrenaica_area = {
			add_unrest = -10
		}
		357 = {
			center_of_trade = 1
		}
	}	
}

country_event = { ###Peace for now? if rebels crushed###
	id = foi_flavor_egy.12
	title = foi_flavor_egy.12.t
	desc = foi_flavor_egy.12.d
	picture = DEBATE_REPUBLICAN_eventPicture

	trigger = {
		tag = EGY
		cyrenaica_area = {
			type = all
			owned_by = ROOT
		}
		has_country_flag = foi_egy_kyrenaikian_greek_rebellion
		NOT = {
			num_of_rebel_armies = 1
		}
	}

	immediate = {
		clr_country_flag = foi_egy_kyrenaikian_greek_rebellion
	}

	option = { #expell the kyrenaikians
		name = foi_flavor_egy.12.a
		custom_tooltip = foi_flavor_egy.3.a.tt 
		ai_chance = { 
			factor = 60 
			modifier = {
				factor = 1.66
				has_global_flag = egy_deport_egyptiote_commununity_flag
			}
			modifier = {
				factor = 0.5
				has_global_flag = egy_egyptiote_commununity_flag
			}
		}
		cyrenaica_area = {
			limit = { 
				owned_by = root
				culture = kyrenaikian_greek
			}
			change_culture = kyrenaikian_coptic
			change_religion = coptic
			add_devastation = 20
			remove_core = KYR
			add_base_tax = -1
			add_base_production = -1
			add_base_manpower = -1	
		}
		356 = {
			add_loot_from_rich_province_general_effect = {
				LOOTER = owner #EGY
			}
		}
		set_global_flag = egy_kyrenaikian_deported_flag
		every_country = {
			limit = {
				OR = {
					primary_culture = macedonian
					primary_culture = morean
					primary_culture = aegean
					primary_culture = micrasiate
					primary_culture = pontic_greek
					primary_culture = cappadocian
					primary_culture = griko
				}
				religion = orthodox
			}
			add_opinion = { 
				who = ROOT 
				modifier = foi_egy_kyrenaikian_deported
			}
		}
	}	
#we shall take their word
	option = { 
		name = foi_flavor_egy.12.b
		custom_tooltip = foi_flavor_egy.3.b.tt 
		ai_chance = { 
			factor = 40 
			modifier = {
				factor = 0
				has_global_flag = egy_deport_egyptiote_commununity_flag
			}
			modifier = {
				factor = 1.75
				has_global_flag = egy_egyptiote_commununity_flag
			}
		}
		set_global_flag = foi_egy_kyrenaikian_community_flag
		cyrenaica_area = {
			add_unrest = -10
		}
		357 = {
			center_of_trade = 1
		}	
	}
}
country_event = { ###Unrest Grows in cyrenaica###
	id = foi_flavor_egy.13
	title = foi_flavor_egy.13.t
	desc = foi_flavor_egy.13.d
	picture = REVOLUTION_eventPicture
	
	is_triggered_only = yes


	option = { #military intervention
		name = foi_flavor_egy.13.a
		ai_chance = { 
			factor = 40
			modifier = {
				factor = 0
				OR = {
					NOT = { manpower = 10 }
					NOT = { has_global_flag = egy_deport_egyptiote_commununity_flag }
					has_global_flag = egy_egyptiote_commununity_flag
				}
			}
			modifier = {
				factor = 0.375
				OR = {
					manpower = 20
					NOT = { has_global_flag = egy_deport_egyptiote_commununity_flag }
					has_global_flag = egy_egyptiote_commununity_flag
				}
			}
			modifier = {
				factor = 1.625
				OR = {
					NOT = { manpower = 10 }
					has_global_flag = egy_deport_egyptiote_commununity_flag
					NOT = { has_global_flag = egy_egyptiote_commununity_flag }
				}
			}
			modifier = {
				factor = 2.5
				OR = {
					manpower = 20
					has_global_flag = egy_deport_egyptiote_commununity_flag
					NOT = { has_global_flag = egy_egyptiote_commununity_flag }
				}
			}
		}
		add_manpower = -6
		hidden_effect = {
    		country_event = {
        		id = foi_flavor_egy.14
        		days = 1825
        		random = 365
			}
		}
	}	

	option = { #negotiate with the rebels
		name = foi_flavor_egy.13.b
		ai_chance = { 
			factor = 60
			modifier = {
				factor = 1.665
				OR = {
					NOT = { manpower = 10 }
					NOT = { has_global_flag = egy_deport_egyptiote_commununity_flag }
					has_global_flag = egy_egyptiote_commununity_flag
				}
			}
			modifier = {
				factor = 1.415
				OR = {
					manpower = 20
					NOT = { has_global_flag = egy_deport_egyptiote_commununity_flag }
					has_global_flag = egy_egyptiote_commununity_flag
				}
			}
			modifier = {
				factor = 0.585
				OR = {
					NOT = { manpower = 10 }
					has_global_flag = egy_deport_egyptiote_commununity_flag
					NOT = { has_global_flag = egy_egyptiote_commununity_flag }
				}
			}
			modifier = {
				factor = 0
				OR = {
					manpower = 20
					has_global_flag = egy_deport_egyptiote_commununity_flag
					NOT = { has_global_flag = egy_egyptiote_commununity_flag }
				}
			}
		}
		hidden_effect = {
    		country_event = {
        		id = foi_flavor_egy.15
        		days = 120
        		random = 20
			}
		}
	}	
}
country_event = { ###Kyrenaikian revolt large###
	id = foi_flavor_egy.14
	title = foi_flavor_egy.14.t
	desc = foi_flavor_egy.14.d
	picture = COUNTRY_COLLAPSE_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			356 = {
				spawn_rebels = {
					type = nationalist_rebels
					size = 3
					leader = "Alexander"
					leader_dynasty = "Drakontopoulos"
					culture = kyrenaikian_greek
				}					
			}
		}
	}

	option = {
		name = foi_flavor_egy.14.a
		ai_chance = { factor = 100 }
		set_country_flag = foi_egy_kyrenaikian_greek_rebellion
	}
}
country_event = { ###Kyrenaikian compromise###
	id = foi_flavor_egy.15
	title = foi_flavor_egy.15.t
	desc = foi_flavor_egy.15.d
	picture = COURT_eventPicture

	is_triggered_only = yes

	option = { #oppose compromise
		name = foi_flavor_egy.15.a
		custom_tooltip = foi_flavor_egy.3.a.tt 
		ai_chance = { 
			factor = 30
			modifier = {
				factor = 2.35
				has_global_flag = egy_deport_egyptiote_commununity_flag
			}
			modifier = {
				factor = 0
				has_global_flag = egy_egyptiote_commununity_flag
			}
		}
		hidden_effect = {
    		country_event = {
        		id = foi_flavor_egy.14
        		days = 60
        		random = 10
			}
		}
	}	

	option = { #support compromise
		name = foi_flavor_egy.15.b
		custom_tooltip = foi_flavor_egy.3.b.tt 
		ai_chance = { 
			factor = 70 
			modifier = {
				factor = 0.43
				has_global_flag = egy_deport_egyptiote_commununity_flag
			}
			modifier = {
				factor = 1.43
				has_global_flag = egy_egyptiote_commununity_flag
			}
		}
		set_global_flag = foi_egy_kyrenaikian_community_flag
		cyrenaica_area = {
			limit = { owned_by = root }
			add_province_modifier = {
				name = "egy_kyrenaikian_administration"
				duration = -1
			}
		}
	}	
}
country_event = { ###Egyptiote Refugees###
	id = foi_flavor_egy.16
	title = foi_flavor_egy.16.t
	desc = foi_flavor_egy.16.d
	picture = BIG_BOOK_eventPicture

	fire_only_once = yes

	trigger = {
		OR = {
			primary_culture = macedonian
			primary_culture = morean
			primary_culture = aegean
			primary_culture = micrasiate
			primary_culture = pontic_greek
			primary_culture = cappadocian
			primary_culture = griko
		}
		religion = orthodox
		is_subject = no
		num_of_cities = 6
		NOT = {
			has_country_flag = received_egyptiote_commununity_flag
		}
		has_global_flag = egy_deport_egyptiote_commununity_flag
		capital_scope = {
			OR = {
				region = anatolia_region
				region = balkan_region
				region = italy_region
			}
		}
	}
	
	mean_time_to_happen = {
		months = 60
	}
	
	immediate = {
		set_country_flag = received_egyptiote_commununity_flag
	}
	
	option = {
		name = foi_flavor_egy.16.a
		ai_chance = { factor = 80 }
		add_country_modifier = {
			name = "orthodox_egyptiote_influx"
			duration = 10950
		}
		every_country = {
			limit = {
				OR = {
					primary_culture = macedonian
					primary_culture = morean
					primary_culture = aegean
					primary_culture = micrasiate
					primary_culture = pontic_greek
					primary_culture = cappadocian
					primary_culture = griko
				}
				religion = orthodox
			}
			add_opinion = { 
				who = ROOT 
				modifier = foi_flavor_egyptiote_yes_refugees_byz
			}
		}
		add_dip_power = -120
		add_adm_power = -40
		add_prestige = 5
	}
	option = {
		name = foi_flavor_egy.16.b
		ai_chance = { factor = 20 }
		add_prestige = -10
		every_country = {
			limit = {
				tag = EGY
			}
			add_opinion = { 
				who = ROOT
				modifier = foi_flavor_egyptiote_no_refugees
			}
		}
		every_country = {
			limit = {
				OR = {
					primary_culture = macedonian
					primary_culture = morean
					primary_culture = aegean
					primary_culture = micrasiate
					primary_culture = pontic_greek
					primary_culture = cappadocian
					primary_culture = griko
				}
				religion = orthodox
			}
			add_opinion = { 
				who = ROOT 
				modifier = foi_flavor_egyptiote_no_refugees_byz
			}
		}
	}
}

country_event = { ###Kyrenaikian Refugees###
	id = foi_flavor_egy.17
	title = foi_flavor_egy.17.t
	desc = foi_flavor_egy.17.d
	picture = BIG_BOOK_eventPicture

	fire_only_once = yes

	trigger = {
		OR = {
			primary_culture = macedonian
			primary_culture = morean
			primary_culture = aegean
			primary_culture = micrasiate
			primary_culture = pontic_greek
			primary_culture = cappadocian
			primary_culture = griko
		}
		religion = orthodox
		is_subject = no
		num_of_cities = 6
		NOT = {
			has_country_flag = received_kyrenaikian_commununity_flag
		}
		has_global_flag = egy_kyrenaikian_deported_flag
		capital_scope = {
			OR = {
				region = anatolia_region
				region = balkan_region
				region = italy_region
			}
		}
	}
	
	mean_time_to_happen = {
		months = 60
	}
	
	immediate = {
		set_country_flag = received_kyrenaikian_commununity_flag
	}
	
	option = {
		name = foi_flavor_egy.17.a
		ai_chance = { factor = 80 }
		random_owned_province = {
			limit = { culture_group = byzantine }
			add_base_production = 1
			add_province_modifier = {
				name = "egy_kyrenaikian_refugees"
				duration = 18250
			}
		}
		random_owned_province = {
			limit = { culture_group = byzantine }
			add_base_production = 1
			add_province_modifier = {
				name = "egy_kyrenaikian_refugees"
				duration = 18250
			}
		}
		random_owned_province = {
			limit = { culture_group = byzantine }
			add_base_production = 1
			add_province_modifier = {
				name = "egy_kyrenaikian_refugees"
				duration = 18250
			}
		}
		random_owned_province = {
			limit = { culture_group = byzantine }
			add_base_production = 1
			add_province_modifier = {
				name = "egy_kyrenaikian_refugees"
				duration = 18250
			}
		}
		add_years_of_income = -0.5
		add_prestige = 10
		every_country = {
			limit = {
				OR = {
					primary_culture = macedonian
					primary_culture = morean
					primary_culture = aegean
					primary_culture = micrasiate
					primary_culture = pontic_greek
					primary_culture = cappadocian
					primary_culture = griko
				}
				religion = orthodox
			}
			add_opinion = { 
				who = ROOT 
				modifier = foi_flavor_kyrenaikian_yes_refugees_byz
			}
		}
	}
	option = {
		name = foi_flavor_egy.17.b
		ai_chance = { factor = 20 }
		add_prestige = -20
		every_country = {
			limit = {
				tag = EGY
			}
			add_opinion = {
				who = ROOT 
				modifier = foi_flavor_kyrenaikian_no_refugees
			}
		}
		every_country = {
			limit = {
				OR = {
					primary_culture = macedonian
					primary_culture = morean
					primary_culture = aegean
					primary_culture = micrasiate
					primary_culture = pontic_greek
					primary_culture = cappadocian
					primary_culture = griko
				}
				religion = orthodox
			}
			add_opinion = { 
				who = ROOT 
				modifier = foi_flavor_kyrenaikian_no_refugees_byz
			}
		}
	}
}

country_event = { ###Byzantine Greek Scholars###
	id = foi_flavor_egy.18
	title = foi_flavor_egy.18.t
	desc = foi_flavor_egy.18.d
	picture = MERCHANTS_TALKING_eventPicture

	trigger = {
		tag = EGY
		owns = 358
		owns = 361
		is_institution_enabled = renaissance
		has_global_flag = egy_egyptiote_commununity_flag
		has_global_flag = byzantine_empire_in_decline_flag
	}

	fire_only_once = yes

	mean_time_to_happen = {
		months = 60
	}

	option = { #Inivte Byzantine Greek Scholars
		name = foi_flavor_egy.18.a
		ai_chance = { factor = 95 }
		custom_tooltip = foi_flavor_egy.3.b.tt
		set_country_flag = foi_egy_byzantine_scholars_flag
		add_country_modifier = {
			name = "egy_byzantine_scholars"
			duration = 3650
		}
		358 = {
			add_institution_embracement = {
    			which = renaissance
    			value = 50
			}
			add_unrest = 8
		}
		hidden_effect = {
			BYZ = {
    			country_event = {
        			id = foi_flavor_egy.19
        			days = 30
				}
			}
		}
	}

	option = { #Go back to Byzantium where you belong
		name = foi_flavor_egy.18.b
		ai_chance = { factor = 5 } 
		custom_tooltip = foi_flavor_egy.3.a.tt
		add_stability = 1
	}
}

country_event = { ###Egypt be trolling###
	id = foi_flavor_egy.19
	title = foi_flavor_egy.19.t
	desc = foi_flavor_egy.19.d
	picture = CORRUPTION_eventPicture

	is_triggered_only = yes

	option = { #They will pay for their treachery.
		name = foi_flavor_egy.19.a
		ai_chance = { factor = 50 }
		add_casus_belli = {
			target = EGY
			type = cb_insult
			months = 24
		}
		add_adm_power = -60
		add_country_modifier = {
			name = "egy_byz_byzantine_scholars"
			duration = 3650
		}
	}
	option = { #We'll deal with them later...
		name = foi_flavor_egy.19.b
		ai_chance = { factor = 50 } 
		add_country_modifier = {
			name = "egy_byz_byzantine_scholars"
			duration = 3650
		}
		add_prestige = -30
	} 
}

country_event = { ###Cyprus direct rule event###
	id = foi_flavor_egy.20
	title = foi_flavor_egy.20.t
	desc = foi_flavor_egy.20.d
	picture = CONQUEST_eventPicture
	
	trigger = {
		tag = EGY
		321 = {
			owned_by = ROOT
			is_core = ROOT
		}
		has_country_flag = foi_egy_cyprus_conquest
	}

	mean_time_to_happen = {
		months = 24
	}

	immediate = {
		clr_country_flag = foi_egy_cyprus_conquest
	}

	option = { #Crush the rebellious Cypriots
		name = foi_flavor_egy.20.a
		ai_chance = { 
			factor = 50
			modifier = {
				factor = 2
				has_global_flag = egy_kyrenaikian_deported_flag
			}
			modifier = {
				factor = 0
				has_global_flag = foi_egy_kyrenaikian_community_flag
			}
		}
		custom_tooltip = foi_flavor_egy.3.a.tt
		321 = {
			change_religion = ROOT
			change_culture = ROOT
			add_base_tax = 1
			add_base_manpower = 1
		}
		hidden_effect = {
			random_list = {
				80 = {
    				country_event = {
        				id = foi_flavor_egy.21
        				days = 2	#3650
        				random = 1	#1095
					}
				}
				20 = {
					#nothing bad happens
				}
			}
		}
	}
	option = { #Reintegrate the province into the kingdom
		name = foi_flavor_egy.20.b
		ai_chance = { 
			factor = 50
			modifier = {
				factor = 0
				has_global_flag = egy_kyrenaikian_deported_flag
			}
			modifier = {
				factor = 2
				has_global_flag = foi_egy_kyrenaikian_community_flag
			}
		}
		custom_tooltip = foi_flavor_egy.3.b.tt
	} 
}

country_event = { ###Cyprus revolts###
	id = foi_flavor_egy.21
	title = foi_flavor_egy.21.t
	desc = foi_flavor_egy.21.d
	picture = BATTLE_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			321 = {
				change_religion = orthodox
				change_culture = aegean
				add_core = CYP
			}
		}
	}

	option = {
		name = foi_flavor_egy.21.a
		ai_chance = { factor = 100 }
		hidden_effect = {
			321 = {
				spawn_rebels = {
					type = nationalist_rebels
					size = 3
					leader = "Themistokles"
					leader_dynasty = "Euforbenos"
					religion = orthodox
					culture = aegean
				}
				add_base_tax = -1
				add_base_manpower = -1
			}
		}
		set_country_flag = foi_egy_cyprus_greek_rebellion
	}
}

country_event = { ###Cyprus rebellion crushed###
	id = foi_flavor_egy.22
	title = foi_flavor_egy.22.t
	desc = foi_flavor_egy.22.d
	picture = LIBERUM_VETO_eventPicture

	trigger = {
		tag = EGY
		321 = {
			owned_by = ROOT
			is_core = ROOT
		}
		has_country_flag = foi_egy_cyprus_greek_rebellion
		NOT = {
			num_of_rebel_armies = 1
		}
	}

	immediate = {
		clr_country_flag = foi_egy_cyprus_greek_rebellion
	}

	option = { #enforce coptic rule
		name = foi_flavor_egy.22.a
		ai_chance = { 
			factor = 80
			modifier = {
				factor = 1.25
				has_global_flag = egy_kyrenaikian_deported_flag
			}
			modifier = {
				factor = 0.5
				has_global_flag = foi_egy_kyrenaikian_community_flag
			}
		}
		custom_tooltip = foi_flavor_egy.3.a.tt
		321 = {
			change_religion = ROOT
			change_culture = ROOT
		}
	}

	option = { #let them be free
		name = foi_flavor_egy.22.b
		ai_chance = { 
			factor = 20
			modifier = {
				factor = 0
				has_global_flag = egy_kyrenaikian_deported_flag
			}
			modifier = {
				factor = 3
				has_global_flag = foi_egy_kyrenaikian_community_flag
			}
		}
		custom_tooltip = foi_flavor_egy.3.b.tt
	}
} 

country_event = { ###Cyprus vassal event###
	id = foi_flavor_egy.23
	title = foi_flavor_egy.23.t
	desc = foi_flavor_egy.23.d
	picture = COURT_eventPicture
	
	trigger = {
		tag = EGY
		321 = {
			owned_by = CYP
			is_core = CYP
		}
		has_country_flag = foi_egy_cyprus_conquest
	}

	mean_time_to_happen = {
		months = 1
	}

	immediate = {
		clr_country_flag = foi_egy_cyprus_conquest
	}

	option = { #reintegrate the province
		name = foi_flavor_egy.23.a
		ai_chance = { 
			factor = 50
			modifier = {
				factor = 0
				has_global_flag = egy_kyrenaikian_deported_flag
			}
			modifier = {
				factor = 2
				has_global_flag = foi_egy_kyrenaikian_community_flag
			}
		}
		custom_tooltip = foi_flavor_egy.3.b.tt
		inherit = CYP
	}
	option = { # continue as a Vassal of Egypt
		name = foi_flavor_egy.23.b
		ai_chance = { factor = 0 } 
		custom_tooltip = foi_flavor_egy.3.b.tt
	} 
	option = { #Egyptian rule over Cyprus
		name = foi_flavor_egy.23.c
		ai_chance = { 
			factor = 50
			modifier = {
				factor = 2
				has_global_flag = egy_kyrenaikian_deported_flag
			}
			modifier = {
				factor = 0
				has_global_flag = foi_egy_kyrenaikian_community_flag
			}
		}
		custom_tooltip = foi_flavor_egy.3.a.tt
		inherit = CYP
		321 = {
			change_religion = ROOT
			change_culture = ROOT
			add_base_tax = 1
			add_base_manpower = 1
		}
		hidden_effect = {
			random_list = {
				90 = {
    				country_event = {
        				id = foi_flavor_egy.21
        				days = 3650
        				random = 1095
					}
				}
				10 = {
					#nothing bad happens
				}
			}
		}
	} 
}

country_event = { ###Restore the Nile Delta###
	id = foi_flavor_egy.24
	title = foi_flavor_egy.24.t
	desc = foi_flavor_egy.24.d
	picture = CITY_DEVELOPMENT_eventPicture
	
	trigger = {
		tag = EGY
		is_year = 1515
		owns_core_province = 2316
		owns_core_province = 4316
		owns_core_province = 363
		owns_core_province = 362				
		has_country_flag = foi_egy_byzantine_scholars_flag
		NOT = {
			has_country_flag = egy_waset_restored_flag
			has_country_flag = egy_waset_construction_flag
			has_country_flag = egy_waset_construction_wait_flag
			has_country_flag = egy_nile_delta_restored 
			has_country_flag = egy_nile_delta_construction_wait_flag 
			has_country_flag = egy_nile_delta_construction
		}
	}

	mean_time_to_happen = {
		months = 240
	}

	option = { #Let us restore the Nile Delta
		name = foi_flavor_egy.24.a
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				NOT = { years_of_income = 0.3 }
			}
		}
		custom_tooltip = foi_flavor_egy.3.b.tt 
		add_years_of_income = -0.3
		set_country_flag = egy_nile_delta_construction_flag
		4316 = {
			add_province_modifier = {
				name = "egy_nile_delta_construction"
				duration = -1
			}
		}
		2316 = {
			add_province_modifier = {
				name = "egy_nile_delta_construction"
				duration = -1
			}
		}
		363 = {
			add_province_modifier = {
				name = "egy_nile_delta_construction"
				duration = -1
			}
		}
		362 = {
			add_province_modifier = {
				name = "egy_nile_delta_construction"
				duration = -1
			}
		}
	}
	
	option = { #The Nile Delta undefendable terrain
		name = foi_flavor_egy.24.b
		custom_tooltip = foi_flavor_egy.3.a.tt 
		ai_chance = {
			factor = 0
		}
		add_stability_or_adm_power = yes
	}

	option = { #Another Time
		name = foi_flavor_egy.24.c
		ai_chance = {
			factor = 0
			modifier = {
				factor = 100
				NOT = { years_of_income = 0.3 }
			}
		}
		add_prestige = -20
		set_country_flag = egy_nile_delta_construction_wait_flag
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -10
		}
	}
}

country_event = { ###Nile Delta restored###
	id = foi_flavor_egy.25
	title = foi_flavor_egy.25.t
	desc = foi_flavor_egy.25.d
	picture = CITY_VIEW_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		tag = EGY
		owns_core_province = 2316
		owns_core_province = 4316
		owns_core_province = 363
		owns_core_province = 362	
		2316 = {
			has_province_modifier = egy_nile_delta_construction
		}
		4316 = {
			has_province_modifier = egy_nile_delta_construction
		}
		363 = {
			has_province_modifier = egy_nile_delta_construction
		}
		362 = {
			has_province_modifier = egy_nile_delta_construction
		}
		had_country_flag = { flag = egy_nile_delta_construction_flag days = 7300 }
	}

	mean_time_to_happen = {
		months = 300
	}
	
	option = { #Feels good man
		name = foi_flavor_egy.25.a
		ai_chance = { factor = 100 }
		add_prestige = 20
		4316 = {
			remove_province_modifier = egy_nile_delta_construction
			add_province_modifier = {
				name = "egy_nile_delta_restored"
				duration = -1
			}
		}
		2316 = {
			remove_province_modifier = egy_nile_delta_construction
			add_province_modifier = {
				name = "egy_nile_delta_restored"
				duration = -1
			}
		}
		363 = {
			remove_province_modifier = egy_nile_delta_construction
			add_province_modifier = {
				name = "egy_nile_delta_restored"
				duration = -1
			}
		}
		362 = {
			remove_province_modifier = egy_nile_delta_construction
			add_province_modifier = {
				name = "egy_nile_delta_restored"
				duration = -1
			}
		}
		set_country_flag = egy_nile_delta_restored_flag
	}	
}

country_event = { ###Scholars of Alexandria#
	id = foi_flavor_egy.26
	title = foi_flavor_egy.26.t
	desc = foi_flavor_egy.26.d
	picture = DIPLOMACY_eventPicture
	
	trigger = {
		tag = EGY
		OR = {
			AND = {
				is_year = 1525
				has_country_flag = foi_egy_byzantine_scholars_flag
				has_country_flag = rebuild_EGY_L_HEL_ALX
			}
			AND = {
				years_of_income = 0.2
				has_country_flag = foi_egy_byzantine_scholars_flag
				has_country_flag = rebuild_EGY_L_HEL_ALX
				has_country_flag = foi_library_alexandria_wait_flag
			}
		}
		NOT = {
			has_country_flag = foi_egy_scholars_stop_flag
		}
	}

	mean_time_to_happen = {
		months = 480
		modifier = {
			factor = 0.5
			has_country_flag = foi_library_alexandria_wait_flag
		}
	}

	option = { #fund 
		name = foi_flavor_egy.26.a
		custom_tooltip = foi_flavor_egy.3.b.tt
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				NOT = { years_of_income = 0.2 }
			}
		}
		add_years_of_income = -0.2
		add_country_modifier = {
			name = "egy_alexandrian_scholars"
			duration = 3650
		}
		add_estate_loyalty = {
			estate = estate_burghers
			loyalty = 20
		}
		clr_country_flag = foi_library_alexandria_wait
		give_estate_land_share_massive = { estate = estate_burghers }
		set_country_flag = foi_egy_alexandria_scholars_fund_flag
	}
	
	option = { #later
		name = foi_flavor_egy.26.b 
		ai_chance = {
			factor = 0
			modifier = {
				factor = 100
				NOT = { years_of_income = 0.2 }
			}
		}
		set_country_flag = foi_library_alexandria_wait_flag
		add_estate_loyalty = {
			estate = estate_burghers
			loyalty = -10
		}
	}

	option = { #dont fund
		name = foi_flavor_egy.26.c
		custom_tooltip = foi_flavor_egy.3.a.tt 
		ai_chance = {
			factor = 0
		}
		add_stability = -1
		set_country_flag = foi_egy_scholars_stop_flag
		add_estate_loyalty = {
			estate = estate_burghers
			loyalty = -20
		}
	}
}

country_event = { ###Library of Alexandria###
	id = foi_flavor_egy.27
	title = foi_flavor_egy.27.t
	desc = foi_flavor_egy.27.d
	picture = UNIVERSITY_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		tag = EGY
		had_country_flag = { flag = foi_egy_alexandria_scholars_fund_flag days = 7300 }
	}

	mean_time_to_happen = {
		months = 240
	}
	
	immediate = {
		clr_country_flag = foi_egy_alexandria_scholars_fund_flag
		set_global_flag = foi_library_alexandria_restored
	}

	option = {
		ai_chance = { factor = 100 }
		name = foi_flavor_egy.27.a
		if = {
			limit = {
				has_dlc = "Leviathan"
				owns = 358
				358 = {
					NOT = { 
						has_great_project = { 
							type = library_alexandria
						}
					}
					NOT = { 
						has_construction = library_alexandria
					}
				}
			}
			358 = {	# Alexandria
				add_great_project_tier = {
					type = library_alexandria
					tier = 0
				}
			}
		}
		if = {
			limit = {
				NOT = {
					has_dlc = "Leviathan"
				}
				owns = 358
			}
			add_country_modifier = {
				name = "egy_library_alexandria"
				duration = -1
			}			
		}
	}	
}

country_event = { ###generals of Memfi#
	id = foi_flavor_egy.28
	title = foi_flavor_egy.28.t
	desc = foi_flavor_egy.28.d
	picture = LAND_MILITARY_eventPicture
	
	trigger = {
		tag = EGY
		OR = {
			AND = {
				is_year = 1525
				has_country_flag = egy_kyrenaikian_deported_flag
				has_country_flag = rebuild_EGY_ALX_rakodi
			}
			AND = {
				years_of_income = 0.2
				has_country_flag = egy_kyrenaikian_deported_flag
				has_country_flag = rebuild_EGY_ALX_rakodi
				has_country_flag = foi_great_memphis_academy_wait
			}
		}
		NOT = {
			has_country_flag = foi_great_memphis_academy_stop
		}
	}

	mean_time_to_happen = {
		months = 240
	}

	option = { #fund 
		name = foi_flavor_egy.28.a
		custom_tooltip = foi_flavor_egy.3.a.tt
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				NOT = { years_of_income = 0.2 }
			}
		}
		clr_country_flag = foi_great_memphis_academy_wait
		add_years_of_income = -0.2
		add_country_modifier = {
			name = "egy_memfian_generals"
			duration = 3650
		}
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = 20
		}
		give_estate_land_share_massive = { estate = estate_nobles }
		set_country_flag = foi_egy_memphis_generals_fund_flag
	}
	
	option = { #later
		name = foi_flavor_egy.28.b
		ai_chance = {
			factor = 0
			modifier = {
				factor = 100
				NOT = { years_of_income = 0.2 }
			}
		}
		set_country_flag = foi_great_memphis_academy_wait
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -10
		}
	}

	option = { #dont fund
		name = foi_flavor_egy.28.c
		custom_tooltip = foi_flavor_egy.3.b.tt
		ai_chance = {
			factor = 0
		}
		add_stability = -1
		set_country_flag = foi_great_memphis_academy_stop
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -20
		}
	}
}

country_event = { ###Fortifactions of Egypt###
	id = foi_flavor_egy.29
	title = foi_flavor_egy.29.t
	desc = foi_flavor_egy.29.d
	picture = FORT_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		tag = EGY
		had_country_flag = { flag = foi_egy_memphis_generals_fund_flag days = 7300 }
	}

	mean_time_to_happen = {
		months = 240
	}
	
	immediate = {
		clr_country_flag = foi_egy_memphis_generals_fund_flag
		set_global_flag = foi_great_memphis_academy_restored
	}

	option = {
		ai_chance = { factor = 100 }
		name = foi_flavor_egy.29.a
		if = {
			limit = {
				has_dlc = "Leviathan"
				owns = 361
				361 = {
					NOT = { 
						has_great_project = { 
							type = great_memphis_academy
						}
					}
					NOT = { 
						has_construction = great_memphis_academy
					}
				}
			}
			361 = {	# Alexandria
				add_great_project_tier = {
					type = great_memphis_academy
					tier = 0
				}
			}
		}
		if = {
			limit = {
				NOT = {
					has_dlc = "Leviathan"
				}
				owns = 361
			}
			add_country_modifier = {
				name = "egy_great_memphis_academy"
				duration = -1
			}			
		}
	}
}